---
name: codereview
description: Run an ai-camera code health audit using the codereview rule. Use when /codereview or /code-audit is triggered.
---
# ai-camera 代码审计技能

**视角：我（审计执行者/助手）将如何做**
**目标：** 在规则约束下，稳定产出可执行的审计报告与修复路径。

## 1. 我会使用的规则
- 主规则：`codex/rules/codereview.md`
- 输出目录（建议）：`docs/code-review/`

## 2. 我的执行步骤
1. **确认范围**：明确模块、版本与关键链路（iOS 相机管线/实时提示、云端推理与 WebSocket、账号/订阅、运营后台、隐私合规模块）。
2. **风险扫描**：按 P0→P3 扫描架构边界、安全鉴权、隐私合规、实时延迟/抖动、可靠性降级、成本与可观测性、测试与性能。
3. **证据固化**：记录文件路径、关键片段、触发条件、影响范围。
4. **修复方案**：给出渐进式改造路线（先止血、再结构化优化）。
5. **输出报告**：按模板落盘到 `docs/code-review/`（或按项目约定路径）。

## 3. 我会避免的行为
- 只根据行数下结论。
- 没有证据支撑的“主观批评”。
- 一次性大改替代可渐进重构。

## 4. 交付物
- 审计报告（P0/P1/P2/P3 清单 + 修复优先级）
- 关键修复路径（短期止血 + 中期重构 + 长期演进）
- 已有良好实践（可复用）
